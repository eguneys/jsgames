{"version":3,"sources":["webpack://Sokoban/webpack/bootstrap","webpack://Sokoban/./src/index.css","webpack://Sokoban/./src/theme.css","webpack://Sokoban/./node_modules/css-loader/dist/runtime/api.js","webpack://Sokoban/./node_modules/string-hash/index.js","webpack://Sokoban/./node_modules/style-loader/lib/addStyles.js","webpack://Sokoban/./node_modules/style-loader/lib/urls.js","webpack://Sokoban/./src/api.js","webpack://Sokoban/./src/board.js","webpack://Sokoban/./src/config.js","webpack://Sokoban/./src/devboot.js","webpack://Sokoban/./src/events.js","webpack://Sokoban/./src/fen.js","webpack://Sokoban/./src/index.css?7d1f","webpack://Sokoban/./src/main.js","webpack://Sokoban/./src/mcts/engine.js","webpack://Sokoban/./src/mcts/node.js","webpack://Sokoban/./src/mcts/params.js","webpack://Sokoban/./src/mcts/position.js","webpack://Sokoban/./src/mcts/search.js","webpack://Sokoban/./src/mcts/sokoban.js","webpack://Sokoban/./src/mcts/util.js","webpack://Sokoban/./src/mcts/worker.js","webpack://Sokoban/./src/move.js","webpack://Sokoban/./src/neural/encoder.js","webpack://Sokoban/./src/neural/factory.js","webpack://Sokoban/./src/neural/network.js","webpack://Sokoban/./src/neural/networkRandom.js","webpack://Sokoban/./src/neural/networkTF.js","webpack://Sokoban/./src/render.js","webpack://Sokoban/./src/state.js","webpack://Sokoban/./src/theme.css?daec","webpack://Sokoban/./src/util.js","webpack://Sokoban/./src/wrap.js"],"names":["start","state","redraw","set","config","render","configure","getFen","fenWrite","squares","pieces","noPushPly","getLegalMoves","board","isEnd","move","dir","mutation","result","dom","callUserFunction","f","setTimeout","s","key","Object","keys","box","role","under","legalMoves","legals","moves","dirDown","orig","dest","dest2","canMove","push","baseMove","events","isEmpty","isBox","apiMove","merge","level","fen","levels","fenRead","base","extend","isObject","o","require","main","Engine","_","__","module","exports","app","bindDocument","unbinds","onKeyDown","startMove","unbindable","document","forEach","el","eventName","callback","addEventListener","removeEventListener","e","code","preventDefault","roles","invRoles","read","split","parseInt","lines","maxColumns","reduce","acc","line","length","needRows","slice","row","gap","left","Math","floor","right","col","pos2key","write","res","square","piece","char","loadLevels","cb","fetch","then","response","json","element","onLoad","defaults","redrawAll","elements","renderWrap","redrawNow","unbind","api","bestMoveCb","options","currentPosition","tree","network","search","populateOptions","updateFromUciOptions","NetworkFactory","LoadNetwork","setupPosition","NodeTree","resetToPosition","setPosition","go","params","limits","searchDeadline","Search","stop","searchParamsPopulate","currentHead","gameBeginNode","history","PositionHistory","deallocateTree","makeMove","append","startingBoard","Sokoban","setFromFen","Node","reset","getCurrentHead","getPositionHistory","Edge","p","setP","p_","getP","getMove","NodePtr","get","parent","index","edges","child","q","n","nInFlight","sibling","isTerminal","createEdges","map","makeTerminal","tryStartScoreUpdate","cancelScoreUpdate","multivisit","finalizeScoreUpdate","v","getParent","getQ","getN","getNStarted","getChildrenVisits","EdgeIterator","hasChildren","getEdgeToNode","node","getOwnEdge","toString","iEdge","range","edge","value","toShortString","x","opts","spaces","indent","roundTo","EdgeAndNode","defaultQ","getU","numerator","join","discardLoss","nodePtr","currentIdx","actualize","tmp","i","getOrSpawnNode","SearchParams","kCpuct","kFpuValue","kFpuValueAtRoot","kNoPush","getCpuct","getFpuValue","atRoot","getNoPushValue","populate","Position","repetitions","getBoard","getNoPush","setRepetitions","getRepetitions","fromParent","isPush","applyMove","other","positions","getPositions","last","getPositionAt","idx","trim","size","getLength","computeLastMoveRepetitions","pos","justBoardFen","now","Date","playedHistory","shouldStop","bestMoveIsSent","finalBestMove","rootNode","getTimeToDeadline","maybeTriggerStop","onlyOnePossibleMoveLeft","fireStopInternal","ensureBestMoveKnown","worker","SearchWorker","Run","WatchdogThread","step","getBestChildNoTemperature","getBestChildrenNoTemperature","count","sort","a","b","console","log","isSearchActive","dirS","piecesSquares","Error","_pieces","encodePiece","stringHash","encodeSquare","boxes","targets","walls","indexOf","moveAsNNIndex","round","minibatch","computation","pickNodeToExtend","bestEdge","secondBestEdge","isRootNode","depth","nodeAlreadyUpdated","ps","Collision","Visit","cpuct","computeCpuct","puctMult","sqrt","max","best","Infinity","secondBest","fpu","getFpu","possibleMoves","cs","Q","score","initializeIteration","computation_","gatherMiniBatch","minibatchSize","collisionEventsLeft","pickedNode","isCollision","isExtendable","extendNode","nnQueried","addNodeToComputation","toAdd","cur","prev","planes","encodePositionForNN","addInput","runNNComputation","fetchMinibatchResults","idxInComputation","nodeToProcess","fetchSingleNodeResult","getQVal","total","getPVal","sokoban","scale","doBackupUpdate","doBackupUpdateSingleNode","canConvert","executeOneIteration","newComputation","N","init","NodeToProcess","dirRight","dirLeft","dirUp","dests","origKey","findChar","origPos","key2pos","destPos","dest2Pos","destKey","dest2Key","undefined","up","down","kMoveHistory","kPlanesPerBoard","kAuxPlaneBase","historyPlanes","j","InputPlane","position","setAll","fill","historyIdx","min","mask","factories","RegisterNetwork","name","factory","getBackendsList","Create","weights","Get","backend","backends","val","HashCat","hash","RandomNetworkComputation","seed","inputs","input","plane","computeBlocking","sample","moveId","RandomNetwork","makeRandomNetwork","makeTFNetwork","posToTranslate","util","translate","boardEl","samePieces","sameSquares","movedPieces","movedSquares","piecesKeys","squaresKeys","k","pieceAtKey","squareAtKey","elPieceName","elSquareName","pMvdSet","pMvd","sMvdSet","sMvd","firstChild","sgKey","isPieceNode","sgPiece","pieceNameOf","safePush","isSquareNode","sgSquare","nextSibling","pop","pieceName","pieceNode","createEl","appendChild","squareName","squareNode","removeNodes","tagName","nodes","removeChild","arr","dirs","rows","allKeys","r","c","factor","percents","style","top","className","createElement","raf","window","requestAnimationFrame","bind","wrap","innerHTML","classList","add","container"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA,cAAM;AACN;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAA6B;AAC7B,qCAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAqB,gBAAgB;AACrC;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,6BAAqB,gBAAgB;AACrC;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,aAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAAkB,8BAA8B;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA,YAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAAoB,2BAA2B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAAmB,cAAc;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAgB,KAAK;AACrB;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,wBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAc,4BAA4B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,uBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,uCAAuC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,uCAAuC;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAiB,sBAAsB;AACvC;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,kBAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAc,wCAAwC;AACtD;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;AACA;AACA,eAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,cAAM;AACN;AACA;AACA;AACA;AACA;AACA,gBAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAI;AACJ;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA,8CAAsC,uBAAuB;;;AAG7D;AACA;;;;;;;;;;;;ACxxBA,2BAA2B,mBAAO,CAAC,qGAAgD;AACnF;AACA,cAAc,QAAS,iBAAiB,uBAAuB,gBAAgB,iBAAiB,GAAG,cAAc,uBAAuB,gBAAgB,iBAAiB,GAAG,mBAAmB,uBAAuB,eAAe,cAAc,2BAA2B,GAAG,WAAW,eAAe,GAAG;;;;;;;;;;;;ACF9S,2BAA2B,mBAAO,CAAC,qGAAgD;AACnF;AACA,cAAc,QAAS;;;;;;;;;;;;;ACFV;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;AACA,2CAA2C,qBAAqB;AAChE;;AAEA;AACA,KAAK;AACL,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC,6BAA6B;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;ACzFa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AChBA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,uDAAQ;;AAE9B;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA,KAAK,KAAwC,EAAE,EAE7C;;AAEF,QAAQ,sBAAiB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;;;;;;;;;;;;;AC9YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA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","file":"bundle.js","sourcesContent":[" \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdateSokoban\"];\n \twindow[\"webpackHotUpdateSokoban\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"d90933ceb02e430dc3ed\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = \"main\";\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\t/*globals chunkId */\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(0)(__webpack_require__.s = 0);\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"sg-container {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nsg-board {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\npiece, square {\\n  position: absolute;\\n  height: 5%;\\n  width: 5%;\\n  background-size: cover;\\n}\\n\\npiece {\\n  z-index: 1;\\n}\\n\", \"\"]);\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nmodule.exports = hash;\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","import { configure } from './config';\nimport { write as fenWrite } from './fen';\nimport * as move from './move';\nimport * as board from './board';\n\nexport function start(state, redraw) {\n  return {\n    set(config) {\n      render(state => configure(state, config), state);\n    },\n    getFen() {\n      return fenWrite(state.squares,\n                      state.pieces,\n                      state.noPushPly);\n    },\n    getLegalMoves() {\n      return board.legalMoves(state);\n    },\n    isEnd() {\n      return board.isEnd(state);\n    },\n    move(dir) {\n      render(state => {\n        switch (dir) {\n        case 'right':\n          move.right(state);\n          break;\n        case 'left':\n          move.left(state);\n          break;\n        case 'up':\n          move.up(state);\n          break;\n        case 'down':\n          move.down(state);\n          break;\n        }\n      }, state);\n    },\n  };  \n};\n\n\nfunction render(mutation, state) {\n  const result = mutation(state);\n  state.dom.redraw();\n  return result;\n}\n","import * as move from './move';\n\nfunction callUserFunction(f) {\n  if (f) setTimeout(f, 0);\n}\n\nexport function isEnd(s) {\n  for (var key of Object.keys(s.pieces)) {\n    var box = s.pieces[key];\n    if (box.role === 'box') {\n      var under = s.squares[key];\n      if (under.role !== 'target') {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport function legalMoves(s) {\n  const legals = [];\n\n  const moves = {\n    'right': move.dirRight,\n    'left': move.dirLeft,\n    'up': move.dirUp,\n    'down': move.dirDown\n  };\n\n  for (var key of Object.keys(moves)) {\n    const dir = moves[key],\n          { orig, dest, dest2 } = move.dests(s, dir);\n\n    if (canMove(s, orig, dest, dest2)) {\n      legals.push(key);\n    }\n  }\n  return legals;\n}\n\nfunction baseMove(s, orig, dest, dest2) {\n  if (s.pieces[dest]) {\n    s.pieces[dest2] = s.pieces[dest];\n    s.noPushPly = 0;\n  } else {\n    s.noPushPly++;\n  }\n  s.pieces[dest] = s.pieces[orig];\n  delete s.pieces[orig];\n\n  callUserFunction(s.events.move);\n  return true;\n}\n\nexport function canMove(s, orig, dest, dest2) {\n  function isEmpty(role) {\n    return role === 'space' || role === 'target';\n  }\n  \n  var isBox = s.pieces[dest] && s.pieces[dest].role === 'box';\n\n  if (!isBox) {\n    return isEmpty(s.squares[dest].role);\n  } else {\n    return isEmpty(s.squares[dest2].role) && !(s.pieces[dest2] && s.pieces[dest2].role === 'box');\n  }\n}\n\nexport function apiMove(s, orig, dest, dest2) {\n  if (canMove(s, orig, dest, dest2)) {\n    return baseMove(s, orig, dest, dest2);\n  }\n  return false;\n}\n","import { read as fenRead } from './fen';\n\nexport function configure(state, config) {\n\n  merge(state, config);\n\n  if (state.level) {\n    config.fen = state.levels[state.level - 1];\n  }\n  if (config.fen) {\n    const { squares, pieces, noPushPly } = fenRead(config.fen);\n    state.squares = squares;\n    state.pieces = pieces;\n    state.noPushPly = noPushPly;\n  }\n\n}\n\n\nfunction merge(base, extend) {\n  for (let key in extend) {\n    if (isObject(base[key]) && isObject(extend[key])) merge(base[key], extend[key]);\n    else base[key] = extend[key];\n  }\n}\n\nfunction isObject(o) {\n  return typeof o === 'object';\n}\n","require(\"./theme.css\");\nrequire(\"./index.css\");\nconst main = require('./main');\nconst Engine = require('./mcts/engine');\n\nconst _ = require('./neural/networkRandom');\nconst __ = require('./neural/networkTF');\n\nmodule.exports = main.app;\nmodule.exports.Engine = Engine.Engine;\n","import * as move from './move';\n\nexport function bindDocument(s) {\n\n  const unbinds = [];\n\n  const onKeyDown = startMove(s);\n\n  unbinds.push(unbindable(document, 'keydown', onKeyDown));\n\n  return () => { unbinds.forEach(f => f()); };\n}\n\nfunction unbindable(el, eventName, callback) {\n  el.addEventListener(eventName, callback);\n  return () => el.removeEventListener(eventName, callback);\n}\n\nfunction startMove(s) {\n  return function(e) {\n    switch (e.code) {\n    case \"ArrowUp\":\n      move.up(s);\n      break;\n    case \"ArrowDown\":\n      move.down(s);\n      break;\n    case \"ArrowLeft\":\n      move.left(s);\n      break;\n    case \"ArrowRight\":\n      move.right(s);\n      break;\n    default:\n      return;\n    }\n    e.preventDefault();\n  };\n}\n","import { pos2key } from './util';\n\nconst roles = { '#': 'wall', '.': 'target', ' ': 'space', '$': 'box', '*': 'boxtarget', '@': 'char', 'o': 'chartarget' };\n\nconst invRoles = { 'wall': '#', 'target': '.', 'space': ' ', 'box': '$', 'boxtarget': '*', 'char': '@', 'chartarget': 'o' };\n\nexport function read(fen) {\n  var split = fen.split(';');\n  var noPushPly = parseInt(split[1] || '0');\n  fen = fen.split(';')[0];\n  var squares = {};\n  var pieces = {};\n  const lines = fen.split('\\n');\n  const maxColumns = lines.reduce((acc, line) => (acc < line.length) ?line.length:acc, 0);\n\n  var needRows = 20 - lines.length;\n\n  while (needRows-- > 0) {\n    lines.push(\"#\");\n  }\n\n  lines.slice(0, 20).forEach((line, row) => {\n    while (line.length < maxColumns) {\n      line = line + \" \";\n    }\n\n    var gap = 20 - maxColumns;\n    if (gap > 0) {\n      var left = Math.floor(gap / 2);\n      var right = left + gap % 2;\n      while (left-- > 0) {\n        line = \"#\" + line;\n      }\n      while (right-- > 0) {\n        line = line + \"#\";\n      }\n    }\n\n    for (var col = 0; col < line.length; col++) {\n      var role = line[col];\n      switch (roles[role]) {\n      case 'char':\n        squares[pos2key([col, row])] = {\n          role: 'space'\n        };\n        pieces[pos2key([col, row])] = {\n          role: 'char'\n        };\n        break;\n      case 'box':\n        squares[pos2key([col, row])] = {\n          role: 'space'\n        };\n        pieces[pos2key([col, row])] = {\n          role: 'box'\n        };\n        break;\n      case 'boxtarget':\n        squares[pos2key([col, row])] = {\n          role: 'target'\n        };\n        pieces[pos2key([col, row])] = {\n          role: 'box'\n        };\n        break;\n      case 'chartarget':\n        squares[pos2key([col, row])] = {\n          role: 'target'\n        };\n        pieces[pos2key([col, row])] = {\n          role: 'char'\n        };\n        break;\n      default:\n        squares[pos2key([col, row])] = {\n          role: roles[role]\n        };\n      }\n    }\n  });\n\n  return { squares, pieces, noPushPly };\n};\n\nexport function write(squares, pieces, noPushPly) {\n  var res = '';\n  for (var row = 0; row < 20; row++) {\n    var line = '';\n    for (var col = 0; col < 20; col++) {\n      const square = squares[pos2key([col, row])];\n      const piece = pieces[pos2key([col, row])];\n      var char;\n      if (piece) {\n        if (piece.role === 'box') {\n          if (square.role === 'space') {\n            char = invRoles['box'];\n          } else {\n            char = invRoles['boxtarget'];\n          }\n        } else {\n          if (square.role === 'space') {\n            char = invRoles['char'];\n          } else {\n            char = invRoles['chartarget'];\n          }\n        }\n      } else {\n        char = invRoles[square.role];\n      }\n      line += char;\n    }\n    res += line + '\\n';\n  }\n  if (noPushPly) \n    res +=  ';' + noPushPly;\n  return res;\n}\n\n\nexport function loadLevels(cb) {\n  fetch('./assets/Original.json')\n    .then(function(response) {\n      return response.json();\n    })\n    .then(cb);\n}\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import { start } from './api';\nimport { configure } from './config';\nimport { defaults } from './state';\n\nimport * as events from './events';\n\nimport renderWrap from './wrap';\nimport render from './render';\n\nimport { loadLevels } from './fen';\n\nexport function app(element, config, onLoad) {\n\n  const state = defaults();\n\n  function redrawAll() {\n\n    const elements = renderWrap(element, state);\n\n    const redrawNow = () => {\n      render(state);\n    };\n\n    state.dom = {\n      elements,\n      redraw: redrawNow,\n      redrawNow: redrawNow\n    };\n\n    redrawNow();\n    state.dom.unbind = events.bindDocument(state, redrawAll);\n  }\n\n  loadLevels(levels => {\n    state.levels = levels;\n\n    configure(state, config || {});\n\n    redrawAll();\n\n    const api = start(state, redrawAll);\n\n    onLoad(api);\n  });\n};\n","import { NodeTree } from './node';\nimport Search from './search';\nimport { populate as searchParamsPopulate } from './params';\n\nimport NetworkFactory from '../neural/factory';\n\nexport function Engine(bestMoveCb, options) {\n  var currentPosition,\n      tree,\n      network,\n      search;\n\n  populateOptions(options);\n\n  const updateFromUciOptions = () => {\n    network = NetworkFactory.LoadNetwork(options);\n  };\n\n  const setupPosition = (fen, moves) => {\n    updateFromUciOptions();\n    \n    if (!tree) {\n      tree = new NodeTree();\n    }\n    tree.resetToPosition(fen, moves);\n  };\n\n  this.setPosition = (fen, moves = []) => {\n    currentPosition = { fen, moves };\n  };\n  \n  this.go = (params) => {\n\n    setupPosition(currentPosition.fen, currentPosition.moves);\n\n    const limits = {\n      searchDeadline: params.searchDeadline\n    };\n\n    search = new Search(tree,\n                        network,\n                        bestMoveCb,\n                        limits,\n                        options);\n\n    search.start();\n  };\n\n  this.stop = () => {\n    if (search) {\n      search.stop();\n    }\n  };\n\n}\n\nfunction populateOptions(options) {\n  NetworkFactory.populateOptions(options);\n  searchParamsPopulate(options);\n}\n","import Sokoban from './sokoban';\nimport PositionHistory from './position';\n\nimport { roundTo } from './util';\n\nexport function NodeTree() {\n  let currentHead,\n      gameBeginNode,\n      history = new PositionHistory();\n\n  const deallocateTree = () => {\n    gameBeginNode = null;\n    currentHead = null;\n  };\n\n\n  const makeMove = (move) => {\n    history.append(move);\n  };\n  \n  this.resetToPosition = (fen, moves) => {\n    const startingBoard = new Sokoban();\n\n    const { noPushPly } = startingBoard.setFromFen(fen);\n\n    if (gameBeginNode) {\n      deallocateTree();\n    }\n\n    if (!gameBeginNode) {\n      gameBeginNode = new Node(null, 0);\n    }\n\n    history.reset(startingBoard, noPushPly);\n\n    currentHead = gameBeginNode;\n\n    for (const move of moves) {\n      makeMove(move);\n    }\n\n  };\n\n  this.getCurrentHead = () => {\n    return currentHead;\n  };\n\n  this.getPositionHistory = () => {\n    return history;\n  };\n}\n\nexport function Edge(move) {\n  \n  // probability that this move will be made\n  var p;\n\n  this.move = move;\n\n  this.setP = (p_) => {\n    p = p_;\n  };\n\n  this.getP = () => {\n    return p;\n  };\n\n  this.getMove = () => {\n    return this.move;\n  };\n}\n\nfunction NodePtr(get, set) {\n  return {\n    get,\n    set\n  };\n}\n\nexport function Node(parent, index) {\n  let edges = [];\n\n  let child;\n\n  // Average value of all visited nodes in subtree.\n  let q = 0,\n      // How many completed visits this node had.\n      n = 0,\n      // how many threads currently process this node\n      // (started but not finished).\n      nInFlight = 0;\n\n  this.parent = parent;\n  this.sibling = null;\n\n  // pointer to first child\n  this.child = null;\n\n  this.index = index;\n\n  this.isTerminal = false;\n\n  this.createEdges = (moves) => {\n    edges = moves.map(_ => new Edge(_));\n  };\n\n  this.makeTerminal = (result) => {\n    this.isTerminal = true;\n    if (result === 'lose') {\n      q = -1;\n    } else {\n      q = 1;\n    }\n  };\n\n  this.tryStartScoreUpdate = () => {\n    if (n === 0 && nInFlight > 0) return false;\n    nInFlight++;\n    return true;\n  };\n\n  this.cancelScoreUpdate = (multivisit = 1) => {\n    nInFlight -= multivisit;\n  };\n\n  this.finalizeScoreUpdate = (v, multivisit = 1) => {\n    if (q + multivisit * (v - q) / (n + multivisit) === 1) {\n      debugger;\n    }\n\n    q += multivisit * (v - q) / (n + multivisit);\n\n    n += multivisit;\n\n    nInFlight -= multivisit;\n  };\n\n  this.getParent = () => {\n    return parent;\n  };\n\n  this.getQ = () => {\n    return q;\n  };\n\n  this.getN = () => {\n    return n;\n  };\n\n  this.getNStarted = () => {\n    return n + nInFlight;\n  };\n\n  this.getChildrenVisits = () => {\n    return n > 0 ? n - 1 : 0;\n  };\n\n  this.edges = () => {\n    return new EdgeIterator(edges, new NodePtr(() => {\n      return this.child;\n    }, (v) => {\n      this.child = v;\n    }));\n  };\n\n  this.hasChildren = () => {\n    return edges.length > 0;\n  };\n\n  // for a child node returns corresponding edge\n  this.getEdgeToNode = (node) => {\n    return edges[node.index];\n  };\n\n  this.getOwnEdge = () => {\n    return this.getParent().getEdgeToNode(this);\n  };\n\n  this.toString = () => {\n    var res = `<node${this.index} q=${q} n=${n}>`;\n    for (var iEdge of this.edges().range()) {\n      var edge = iEdge.value();\n      res += edge.toString() + \",\";\n    }\n    res += \"</node>\";\n    return res;\n  };\n\n  this.toShortString = (x, opts = {}, spaces = \"\") => {\n    var indent = \"  \";\n    var res = spaces + indent + `<node ${this.index} q=${roundTo(q)} n=${roundTo(n)}>`;\n    for (var iEdge of this.edges().range()) {\n      var edge = iEdge.value();\n      res += \"\\n\" + spaces + indent + edge.toShortString(x, opts, spaces + indent) + \"\\n\";\n    }\n    res += spaces + indent + \"</node>\";\n    return res;\n  };  \n}\n\nexport function EdgeAndNode(edge, node) {\n  this.edge = edge;\n  this.node = node;\n\n  this.getQ = (defaultQ) => {\n    return (this.node && this.node.getN() > 0) ? node.getQ() : defaultQ;\n  };\n\n  this.getN = () => {\n    return this.node ? this.node.getN() : 0;\n  };\n  this.getNStarted = () => { return this.node ? this.node.getNStarted() : 0; };\n\n  this.isTerminal = () => {\n    return this.node ? this.node.isTerminal : false;\n  };\n\n\n  this.getP = () => {\n    return this.edge.getP();\n  };\n\n  this.getMove = () => {\n    return this.edge ? this.edge.getMove() : '';\n  };\n\n\n  // Returns U = numerator * p / N;\n  // passed numerator is expected to be equal to (cpuct * sqrt(N[parent]);\n  this.getU = (numerator) => {\n    return numerator * this.getP() / (1 + this.getNStarted());\n  };\n\n  this.toString = () => {\n    var res =\n        [`<edge m=${this.edge.getMove()} p=${roundTo(this.edge.getP())}>`,\n         this.node?this.node.toString():\".\",\n         \"</edge>\"].join(\"\");\n    return res;\n  };\n\n  this.toShortString = (x, opts = {}, spaces) => {\n    if (opts.discardLoss && this.getQ(0) === -1) {\n      if (opts.discardLoss === 'hidden')\n        return '';\n      return `<${this.edge.getMove()} loss/>`;\n    }\n    var res =\n        [`<${this.edge.getMove()} p=${roundTo(this.edge.getP())}>`,\n         (this.node&&x > 0)?\"\\n\"+node.toShortString(x-1, opts, spaces):\".\",\n         `</${this.edge.getMove()}>`].join(\"\");\n    return res;\n  };\n}\n\nexport function EdgeIterator(edges,\n                             nodePtr,\n                             currentIdx = 0) {\n\n  let node;\n\n  const actualize = () => {\n    while (nodePtr.get() && nodePtr.get().index < currentIdx) {\n      var tmp = nodePtr.get();\n      nodePtr = new NodePtr(() => {\n        return tmp.sibling;\n      }, (v) => {\n        tmp.sibling = v;\n      });\n    }\n    if (nodePtr.get() && nodePtr.get().index === currentIdx) {\n      node = nodePtr.get();\n      nodePtr = new NodePtr(() => {\n        return node.sibling;\n      }, (v) => {\n        node.sibling = v;\n      });\n    } else {\n      node = null;\n    }\n  };\n\n  if (nodePtr) {\n    actualize();\n  }\n\n  this.range = () => {\n    var res = [];\n  \n    for (var i = 0; i< edges.length; i++) {\n      res.push(new EdgeIterator(edges, nodePtr, currentIdx + i));\n    }\n    return res;\n  };\n\n  var edge;\n  this.value = () => {\n    if (!edge) {\n      edge = new EdgeAndNode(edges[currentIdx], node);\n    }\n    return edge;\n  };\n\n  this.reset = () => {\n    edge = null;\n  };\n\n  this.getOrSpawnNode = (parent) => {\n    if (node) return node;\n    var tmp = nodePtr.get();\n    nodePtr.set(new Node(parent, currentIdx));\n    nodePtr.get().sibling = tmp;\n    actualize();\n    return node;\n  };\n\n}\n\n\n","export default function SearchParams(options) {\n  \n  const kCpuct = options.kCpuct,\n        kFpuValue = options.kFpuValue,\n        kFpuValueAtRoot = kFpuValue;\n\n  const kNoPush = options.kNoPush;\n  \n  this.getCpuct = () => {\n    return kCpuct;\n  };\n  \n  this.getFpuValue = (atRoot) => {\n    return atRoot ? kFpuValueAtRoot : kFpuValue;\n  };\n\n  this.getNoPushValue = () => {\n    return kNoPush;\n  };\n}\n\nexport function populate(options) {\n  options.kCpuct = options.kCpuct || 1.4;\n  options.kFpuValue = options.kFpuValue || 1.2;\n  options.kNoPush = options.kNoPush || 15;\n}\n","import Sokoban from './sokoban';\n\nfunction Position(board, noPushPly) {\n\n  this.noPushPly = noPushPly;\n\n  let repetitions = 0;\n\n  this.getBoard = () => {\n    return board;\n  };\n\n  this.getNoPush = () => {\n    return this.noPushPly;\n  };\n\n  this.setRepetitions = (n) => {\n    repetitions = n;\n  };\n\n  this.getRepetitions = () => {\n    return repetitions;\n  };\n}\n\nPosition.fromParent = (parent, move) => {\n  const board = new Sokoban();\n  board.setFromFen(parent.getBoard().fen);\n  const isPush = board.applyMove(move);\n  return new Position(board, isPush ? 0 : parent.noPushPly + 1);\n};\n\nexport default function PositionHistory(other) {\n  var positions = [];\n  if (other) {\n    positions = other.getPositions();\n  }\n\n  this.getPositions = () => {\n    return positions;\n  };\n\n  this.last = () => {\n    return positions.slice(-1)[0];\n  };\n\n  this.getPositionAt = (idx) => {\n    return positions[idx];\n  };\n\n  this.trim = (size) => {\n    positions = positions.slice(0, size);\n  };\n\n  this.getLength = () => {\n    return positions.length;\n  };\n\n  this.reset = (board, noPushPly) => {\n    positions = [];\n    positions.push(new Position(board, noPushPly));\n  };\n\n  this.append = (move) => {\n    positions.push(Position.fromParent(this.last(), move));\n    this.last().setRepetitions(computeLastMoveRepetitions());\n  };\n\n  const computeLastMoveRepetitions = () => {\n    const last = this.last();\n    for (var idx = positions.length - 2; idx >= 0; idx--) {\n      const pos = positions[idx];\n      if (justBoardFen(pos.getBoard().fen) === justBoardFen(last.getBoard().fen)) {\n        return 1 + pos.getRepetitions();\n      }\n    }\n    return 0;\n  };\n};\n\nfunction justBoardFen(fen) {\n  return fen.split(';')[0];\n}\n","import SearchWorker from './worker';\nimport { EdgeAndNode } from './node';\nimport SearchParams from './params';\n\nfunction now() {\n  return Date.now();\n}\n\nexport default function Search(tree,\n                               network,\n                               bestMoveCb,\n                               limits,\n                               options) {\n\n  this.playedHistory = \n    tree.getPositionHistory();\n  this.network = network;\n\n  const params = new SearchParams(options);\n\n  let shouldStop = false,\n      bestMoveIsSent = false,\n      finalBestMove;\n  \n  this.rootNode = tree.getCurrentHead();\n\n  const getTimeToDeadline = () => {\n    if (!limits.searchDeadline) return 0;\n    return limits.searchDeadline - now();\n  };\n\n  const maybeTriggerStop = () => {\n    if (bestMoveIsSent) return;\n    if (!shouldStop) {\n      if (this.onlyOnePossibleMoveLeft) {\n        fireStopInternal();\n      }\n      if (limits.searchDeadline && getTimeToDeadline() <= 0) {\n        fireStopInternal();\n      }\n    }\n\n    if (shouldStop && !bestMoveIsSent) {\n      ensureBestMoveKnown();\n      if (!finalBestMove) {\n        var worker = new SearchWorker(this, params);\n        worker.Run();\n        ensureBestMoveKnown();\n      }\n      bestMoveCb(finalBestMove.getMove());\n      bestMoveIsSent = true;\n    }\n  };\n\n  const WatchdogThread = () => {\n    function step() {\n      maybeTriggerStop();\n      if (bestMoveIsSent)\n        return;\n      setTimeout(step, 0);\n    }\n    step();\n  };\n\n  const fireStopInternal = () => {\n    shouldStop = true;\n  };\n\n  const ensureBestMoveKnown = () => {\n    if (bestMoveIsSent) return;\n    if (!this.rootNode.hasChildren()) return;\n\n    finalBestMove = getBestChildNoTemperature(this.rootNode);\n  };\n\n  const getBestChildrenNoTemperature = (parent, count) => {\n\n    // console.log(parent.toShortString(2, { discardLoss: false }));\n\n    var edges = [];\n\n    for (var iEdge of parent.edges().range()) {\n      var edge = iEdge.value();\n      edges.push({ n: edge.getN(), q: edge.getQ(0), p: edge.getP(), value: edge });\n    }\n    edges.sort((a, b) => {\n      var n = b.n - a.n,\n          q = n,\n          p = n;\n\n      if (n === 0) {\n        q = b.q - a.q;\n        if (q === 0) {\n          p = b.p - a.p;\n        }\n      }\n      return p;\n    });\n\n    console.log(edges.map(_ => _.n + _.value.getMove()));\n\n    var res = edges.map(_ => _.value);\n    return res;\n  };\n\n  const getBestChildNoTemperature = (parent) => {\n    const res = getBestChildrenNoTemperature(parent, 1);\n    return res[0] || new EdgeAndNode();\n  };\n\n  this.start = () => {\n    WatchdogThread();\n\n    var worker = new SearchWorker(this, params);\n    worker.Run();\n  };\n\n  this.stop = () => {\n    fireStopInternal();\n  };\n\n  this.isSearchActive = () => {\n    return !shouldStop;\n  };\n}\n","import stringHash from 'string-hash';\nimport { write as fenWrite, read as fenRead } from '../fen';\nimport * as board from '../board';\nimport * as move from '../move';\n\nconst roles = { '#': 'wall', '.': 'target', ' ': 'space', '$': 'box', '*': 'boxtarget', '@': 'char' };\n\nconst invRoles = { 'wall': '#', 'target': '.', 'space': ' ', 'box': '$', 'boxtarget': '*', 'char': '@' };\n\nexport default function Sokoban() {\n\n  this.applyMove = (dirS) => {\n    var dir;\n    switch (dirS) {\n    case 'up':\n      dir = move.dirUp;\n      break;\n    case 'left':\n      dir = move.dirLeft;\n      break;\n    case 'right':\n      dir = move.dirRight;\n      break;\n    case 'down':\n      dir = move.dirDown;\n      break;\n    }\n    var s = this.piecesSquares();\n    var { orig, dest, dest2 } = move.dests(s, dir);\n\n    if (!board.apiMove({ ...s, events: {} }, orig, dest, dest2)) {\n      throw new Error(\"bad move \" + dirS + \"\\n\" + this.fen);\n      \n    }\n    this.fen = fenWrite(s.squares, s.pieces);\n    this._pieces = null;\n  };\n\n  this.piecesSquares = () => {\n    if (!this._pieces) {\n      this._pieces = fenRead(this.fen);\n    }\n    return this._pieces;\n  };\n\n  this.setFromFen = (fen) => {\n    this.fen = fen;\n    this._pieces = null;\n\n    const { noPushPly } = this.piecesSquares();\n\n    return { noPushPly };\n  };\n\n  const encodePiece = (role) => {\n    return function() {\n      let res = \"\";\n      const { pieces, squares } = this.piecesSquares();\n\n      for (var key of Object.keys(pieces)) {\n        var piece = pieces[key];\n        if (piece.role === role)\n          res += key;\n      }\n      return stringHash(res);\n    };\n  };\n\n  const encodeSquare = (role) => {\n    return function() {\n      let res = \"\";\n      const { pieces, squares } = this.piecesSquares();\n\n      for (var key of Object.keys(squares)) {\n        var square = squares[key];\n        if (square.role === role)\n          res += key;\n      }\n      return stringHash(res);\n    };\n  };\n\n  this.boxes = encodePiece('box');\n\n  this.char = encodePiece('char');\n\n  this.targets = encodeSquare('target');\n\n  this.walls = encodeSquare('wall');\n\n  this.isEnd = () => {\n    return this.fen.indexOf(invRoles['box']) === -1;\n  };\n\n  this.getLegalMoves = () => {\n\n    const { pieces, squares } = this.piecesSquares();\n\n    return board.legalMoves({ pieces, squares});\n  };\n}\n\nexport function moveAsNNIndex(move) {\n  const moves = ['up', 'left', 'down', 'right'];\n  return moves.indexOf(move);\n}\n","export function roundTo(x) {\n  return Math.round(x * 1000) / 1000;\n}\n","import * as sokoban from './sokoban';\n\nimport { encodePositionForNN } from '../neural/encoder';\nimport { EdgeIterator } from './node';\nimport * as util from './util';\nimport PositionHistory from './position';\n\nexport default function SearchWorker(search, params) {\n\n  const history = new PositionHistory(search.playedHistory);\n\n  let minibatch = [],\n      computation;\n\n  const pickNodeToExtend = () => {\n\n    let node = search.rootNode,\n        bestEdge = new EdgeIterator([]),\n        secondBestEdge;\n\n    let isRootNode = true,\n        depth = 0,\n        nodeAlreadyUpdated = true;\n\n    const ps = [];\n    while (true) {\n\n      if (!nodeAlreadyUpdated) {\n        node = bestEdge.getOrSpawnNode(node);\n      }\n\n      bestEdge.reset();\n\n      depth++;\n\n      if (!node.tryStartScoreUpdate()) {\n        // if (!isRootNode) {\n          \n        // }\n        return Collision(node, depth);\n      }\n\n      if (node.isTerminal || !node.hasChildren()) {\n        return Visit(node, depth);\n      }\n\n      nodeAlreadyUpdated = false;\n\n\n      const cpuct = computeCpuct(params, node.getN());\n      const puctMult =\n            cpuct * Math.sqrt(Math.max(node.getChildrenVisits(), 1));\n      var best = -Infinity;\n      var secondBest = -Infinity;\n      const fpu = getFpu(params, node, isRootNode);\n\n      let possibleMoves = 0;\n\n      const cs = [];\n\n      for (var child of node.edges().range()) {\n        if (isRootNode) {\n          possibleMoves++;\n        }\n\n        const Q = child.value().getQ(fpu);\n        const score = child.value().getU(puctMult) + Q;\n\n        cs.push({ Q, score, q: child.value().getQ(fpu) });\n\n        if (score > best) {\n          secondBest = best;\n          secondBestEdge = bestEdge;\n          best = score;\n          bestEdge = child;\n        } else if (score > secondBest) {\n          secondBest = score;\n          secondBestEdge = child;\n        }\n      }\n\n      if (best < -0.5) {\n        // console.log(history.last().getBoard().fen);\n        // console.log(depth, cs, best);\n      }\n\n      if (isRootNode && possibleMoves <= 1) {\n        console.log('onemoveleft', possibleMoves);\n        search.onlyOnePossibleMoveLeft = true;\n      }\n      isRootNode = false;\n    }\n  };\n\n  const initializeIteration = (computation_) => {\n    computation = computation_;\n    minibatch = [];\n  };\n\n  const gatherMiniBatch = () => {\n\n    var minibatchSize = 0;\n    var collisionEventsLeft = 10;\n\n    while (minibatchSize < 10) {\n      minibatch.push(pickNodeToExtend());\n      let pickedNode = minibatch.slice(-1)[0],\n          node = pickedNode.node;\n\n      if (pickedNode.isCollision()) {\n        if (--collisionEventsLeft <= 0) return;\n        if (!search.isSearchActive()) return;\n        continue;\n      }\n\n      minibatchSize++;\n\n      if (pickedNode.isExtendable()) {\n        extendNode(node);\n        if (!node.isTerminal) {\n          pickedNode.nnQueried = true;\n          addNodeToComputation(node);\n        }\n      }\n    }\n    // console.log(minibatch.map(_ => _.isExtendable()));\n  };\n\n  const extendNode = (node) => {\n    history.trim(search.playedHistory.getLength());\n\n    const toAdd = [];\n\n    const ps = [];\n\n    let cur = node;\n    while (cur !== search.rootNode) {\n      let prev = cur.getParent();\n      toAdd.push(prev.getEdgeToNode(cur).getMove());\n      ps.push(prev.toShortString(1));\n      cur = prev;\n    }\n    // console.log(toAdd);\n    // ps.map(_ => console.log(_));\n\n    for (var i = toAdd.length - 1; i >= 0; i--) {\n      history.append(toAdd[i]);\n    }\n\n    const board = history.last().getBoard(),\n          legalMoves = board.getLegalMoves(),\n          isEnd = board.isEnd();\n\n    if (isEnd) {\n      node.makeTerminal('win');\n      return;\n    }\n\n    if (node !== search.rootNode) {\n      if (history.last().getNoPush() >= params.getNoPushValue()) {\n        node.makeTerminal('lose');\n        return;\n      }\n\n      if (history.last().getRepetitions() >= 1) {\n        node.makeTerminal('lose');\n        return;\n      }\n    }\n\n    node.createEdges(legalMoves);\n  };\n\n  const addNodeToComputation = (node) => {\n    const planes = encodePositionForNN(history, 8);\n    computation.addInput(planes);\n  };\n\n  const runNNComputation = () => {\n  };\n\n  const fetchMinibatchResults = () => {\n    var idxInComputation = 0;\n    for (var nodeToProcess of minibatch) {\n      fetchSingleNodeResult(nodeToProcess, idxInComputation);\n      if (nodeToProcess.nnQueried) \n        ++idxInComputation;\n    }\n  };\n\n  const fetchSingleNodeResult = (nodeToProcess, idxInComputation) => {\n    var node = nodeToProcess.node;\n\n    if (!nodeToProcess.nnQueried) {\n      nodeToProcess.v = node.getQ();\n      return;\n    }\n\n    nodeToProcess.v = -computation.getQVal(idxInComputation);\n\n    var total = 0;\n    for (var iEdge of node.edges().range()) {\n      var edge = iEdge.value();\n\n      var p = computation.getPVal(idxInComputation, sokoban.moveAsNNIndex(edge.getMove()));\n      edge.edge.setP(p);\n      total += edge.getP();\n    }\n\n    // normalize P values to add up to 1\n    if (total > 0) {\n      const scale = 1 / total;\n      for (iEdge of node.edges().range()) {\n        edge = iEdge.value();\n        edge.edge.setP(edge.getP() * scale);\n      }\n    }\n    \n  };\n\n  const doBackupUpdate = () => {\n    for (var nodeToProcess of minibatch) {\n      doBackupUpdateSingleNode(nodeToProcess);\n    }    \n  };\n\n  const doBackupUpdateSingleNode = (nodeToProcess) => {\n    let node = nodeToProcess.node;\n    \n    if (nodeToProcess.isCollision()) {\n      for (node = node.getParent(); node !== search.rootNode.getParent(); node = node.getParent()) {\n        node.cancelScoreUpdate();\n      }\n      return;\n    }\n\n    let canConvert = node.isTerminal && !node.getN();\n\n    let v = nodeToProcess.v;\n    for (var n = node, p; n !== search.rootNode.getParent(); n = p) {\n      p = n.getParent();\n\n      if (n.isTerminal) {\n        v = n.getQ();\n      }\n\n      if (n.isTerminal) {\n        // debugger;\n      }\n\n      n.finalizeScoreUpdate(v);\n      \n      canConvert = canConvert && p != search.rootNode && !p.isTerminal;\n\n      if (canConvert && v != 1) {\n        for (var iEdge of p.edges().range()) {\n          var edge = iEdge.value();\n          canConvert = canConvert && edge.isTerminal() && edge.getQ(0) === v;\n        }\n      }\n\n      if (canConvert) {\n        // p.makeTerminal(v === 1 ? 'lose' : 'win');\n      }\n\n    }\n  };\n  \n  const executeOneIteration = () => {\n\n    initializeIteration(search.network.newComputation());\n\n    gatherMiniBatch();\n\n    runNNComputation();\n\n    fetchMinibatchResults();\n\n    doBackupUpdate();\n  };\n\n  this.Run = () => {\n    function step() {\n      executeOneIteration();\n      if (search.isSearchActive()) {\n        setTimeout(step, 0);\n      }\n    }\n    step();\n  };\n  \n}\n\nfunction getFpu(params, node, isRootNode) {\n  const value = params.getFpuValue(isRootNode);\n  return value;\n}\n\nfunction computeCpuct(params, N) {\n  const init = params.getCpuct();\n  return init;\n}\n\nfunction Visit(node, depth) {\n  return new NodeToProcess(node, depth, false);\n}\n\nfunction Collision(node, depth) {\n  return new NodeToProcess(node, depth, true);\n}\n\nfunction NodeToProcess(node, depth, isCollision) {\n\n  this.node = node;\n\n  this.nnQueried = false;\n\n  this.isExtendable = () => {\n    return !isCollision && !node.isTerminal;\n  };\n  this.isCollision = () => {\n    return isCollision;\n  };\n}\n","import { pos2key, key2pos } from './util';\nimport * as board from './board';\n\nexport const dirRight = [1, 0];\nexport const dirLeft = [-1, 0];\nexport const dirUp = [0, -1];\nexport const dirDown = [0, 1];\n\nexport function dests(s, dir) {\n  const origKey = findChar(s),\n        origPos = key2pos(origKey),\n        destPos = [origPos[0] + dir[0],\n                   origPos[1] + dir[1]],\n        dest2Pos = [destPos[0] + dir[0],\n                    destPos[1] + dir[1]],\n        destKey = pos2key(destPos),\n        dest2Key = pos2key(dest2Pos);\n  \n  return { orig: origKey,\n           dest: destKey,\n           dest2: dest2Key };\n}\n\nfunction move(s, dir) {\n\n  const { orig, dest, dest2 } = dests(s, dir);\n\n  board.apiMove(s, orig, dest, dest2);\n\n  s.dom.redraw();\n}\n\nexport function findChar(s) {\n  for (var key of Object.keys(s.pieces)) {\n    var piece = s.pieces[key];\n    if (piece.role === 'char') {\n      return key;\n    }\n  }\n  return undefined;\n}\n\nexport const right = (s) => move(s, dirRight);\nexport const left = (s) => move(s, dirLeft);\nexport const up = (s) => move(s, dirUp);\nexport const down = (s) => move(s, dirDown);\n","import { InputPlane } from './network';\n\nconst kMoveHistory = 8;\nconst kPlanesPerBoard = 7;\nconst kAuxPlaneBase = kPlanesPerBoard * kMoveHistory;\n\nexport function encodePositionForNN(history, historyPlanes) {\n\n  const result = [];\n\n  for (var j = 0; j < kAuxPlaneBase + 2; j++) {\n    result[j] = new InputPlane();\n  }\n\n  const position = history.last();\n  const board = position.getBoard();\n  result[kAuxPlaneBase + 0].setAll();\n  result[kAuxPlaneBase + 1].fill(history.last().getNoPush());\n\n  var historyIdx = history.getLength() - 1;\n  for (var i = 0; i < Math.min(historyPlanes, kMoveHistory);\n       ++i, --historyIdx) {\n    const position = history.getPositionAt(historyIdx < 0 ? 0 : historyIdx);\n\n    if (historyIdx < 0)\n      break;\n    const base = i * kPlanesPerBoard;\n\n    result[base + 0].mask = (board.boxes());\n    result[base + 1].mask = (board.char());\n    result[base + 2].mask = (board.targets());\n    result[base + 3].mask = (board.walls());\n\n    const repetitions = position.getRepetitions();\n    if (repetitions >= 1) result[base + 4].setAll();\n    // if (repetitions >= 3) result[base + 5].setAll();\n  }\n\n  return result;\n}\n                                    \n","function NetworkFactory() {\n\n  var factories = [];\n\n  this.RegisterNetwork = (name, factory) => {\n    factories.push({name, factory});\n  };\n\n  this.getBackendsList = () => {\n    return factories.map(_ => _.name);\n  };\n\n  this.Create = (network, weights, options) => {\n\n    for (var factory of factories) {\n      if (factory.name === network) {\n        return factory.factory(weights, options);\n      }\n    }\n    throw new Error(\"Unknown backend: \" + network);\n  };\n\n};\n\nconst Get = (() => {\n  const factory = new NetworkFactory();\n  return function() {\n    return factory;\n  };\n})();\n\nconst LoadNetwork = (options) => {\n  const backend = options['kBackend'];\n  const weights = null;\n\n  return Get().Create(backend, weights);\n};\n\nfunction populateOptions(options) {\n  const backends = Get().getBackendsList();\n  options['kBackend'] = backends[0];\n}\n\nexport default {\n  Get,\n  LoadNetwork,\n  populateOptions\n};\n","export function InputPlane() {\n\n  this.mask = 0;\n  this.value = 1;\n\n  this.setAll = () => {\n    this.mask = 0xffffffff;\n  };\n\n  this.fill = (val) => {\n    this.setAll();\n    this.value = val;\n  };\n\n}\n","import stringHash from 'string-hash';\nimport NetworkFactory from './factory';\n\n// function Hash(val) {\n//   return 0xfad0 * (val + 0xbaad) +\n//     0x7ace * ((val >> 31) + 0xd571);\n// }\n\n// function HashCat(hash, x) {\n//   hash ^= 0x2997 + Hash(x) + (hash << 6) + (hash >> 2);\n//   return hash;\n// }\n\nfunction HashCat(hash, x) {\n  return stringHash(hash + \" \" + x);\n}\n\nfunction RandomNetworkComputation() {\n  \n  const seed = 0;\n  const inputs = [];\n\n  this.addInput = (input) => {\n    var hash = seed;\n    \n    for (var plane of input) {\n      hash = HashCat(hash, plane.mask);\n      hash = HashCat(hash, plane.value);\n    }\n    \n    inputs.push(hash);\n  };\n  \n  this.computeBlocking = () => {\n  };\n\n  this.getQVal = (sample) => {\n    return ((inputs[sample] % 0xffffffff) - (0xffffffff / 2)) / (0xffffffff / 2);\n  };\n\n  this.getPVal = (sample, moveId) => {\n    return (HashCat(inputs[sample], moveId) % 0xfffffff) / 0xfffffff;\n  };\n}\n\nfunction RandomNetwork(options) {\n  this.newComputation = () => {\n    return new RandomNetworkComputation();\n  }; \n}\n\nfunction makeRandomNetwork(weights, options) {\n  return new RandomNetwork(options);\n}\n\nNetworkFactory.Get().RegisterNetwork(\"random\", makeRandomNetwork);\n","import NetworkFactory from './factory';\n\nfunction makeTFNetwork(weights, options) {\n  \n}\n\nNetworkFactory.Get().RegisterNetwork(\"tensorflow\", makeTFNetwork);\n","import { key2pos, createEl } from './util';\nimport * as util from './util';\n\nexport default function render(s) {\n\n  const posToTranslate = util.posToTranslate,\n        translate = util.translate,\n        boardEl = s.dom.elements.board,\n        pieces = s.pieces,\n        squares = s.squares,\n        samePieces = {},\n        sameSquares = {},\n        movedPieces = {},\n        movedSquares = {},\n        piecesKeys = Object.keys(pieces),\n        squaresKeys = Object.keys(squares);\n  let k,\n      p,\n      el,\n      pieceAtKey,\n      squareAtKey,\n      elPieceName,\n      elSquareName,\n      pMvdSet,\n      pMvd,\n      sMvdSet,\n      sMvd;\n\n  el = boardEl.firstChild;\n\n  while (el) {\n    k = el.sgKey;\n\n    if (isPieceNode(el)) {\n      pieceAtKey = pieces[k];\n      elPieceName = el.sgPiece;\n\n      if (pieceAtKey) {\n        if (elPieceName === pieceNameOf(pieceAtKey)) {\n          samePieces[k] = true;\n        } else {\n          safePush(movedPieces, elPieceName, el);\n        }\n      } else {\n        safePush(movedPieces, elPieceName, el);\n\n      }\n    } else if (isSquareNode(el)) {\n      squareAtKey = squares[k];\n      elSquareName = el.sgSquare;\n\n      if (squareAtKey) {\n        if (elSquareName === pieceNameOf(squareAtKey)) {\n          sameSquares[k] = true;\n        } else {\n          safePush(movedSquares, elSquareName, el); \n        }\n      } else {\n        safePush(movedSquares, elSquareName, el);\n      }      \n    }\n\n    el = el.nextSibling;\n  }\n\n\n  for (const j in piecesKeys) {\n    k = piecesKeys[j];\n    p = pieces[k];\n\n    if (!samePieces[k]) {\n      pMvdSet = movedPieces[pieceNameOf(p)];\n      pMvd = pMvdSet && pMvdSet.pop();\n\n      // same piece moved\n      if (pMvd) {\n        pMvd.sgKey = k;\n        const pos = key2pos(k);\n        translate(pMvd, posToTranslate(pos));\n\n      // no piece in moved obj: insert new piece\n      } else {\n        const pieceName = pieceNameOf(p);\n        const pieceNode = createEl('piece', pieceName);\n        \n        const pos = key2pos(k);\n        pieceNode.sgPiece = pieceName;\n        pieceNode.sgKey = k;\n        translate(pieceNode, posToTranslate(pos));\n        boardEl.appendChild(pieceNode);\n      }\n    }\n  }\n\n  for (const j in squaresKeys) {\n    k = squaresKeys[j];\n    p = squares[k];\n\n    if (!sameSquares[k]) {\n      sMvdSet = movedSquares[pieceNameOf(p)];\n      sMvd = sMvdSet && sMvdSet.pop();\n\n      // same square moved\n      if (sMvd) {\n        sMvd.sgKey = k;\n        const pos = key2pos(k);\n        translate(sMvd, posToTranslate(pos));\n\n      // no square in moved obj: insert new square\n      } else {\n        const squareName = pieceNameOf(p);\n        const squareNode = createEl('square', squareName);\n        \n        const pos = key2pos(k);\n        squareNode.sgSquare = squareName;\n        squareNode.sgKey = k;\n        translate(squareNode, posToTranslate(pos));\n        boardEl.appendChild(squareNode);\n      }\n    }\n  }\n\n  // remove any element that remains in the moved sets\n  for (const i in movedPieces) removeNodes(s, movedPieces[i]);\n  for (const i in movedSquares) removeNodes(s, movedSquares[i]);\n\n}\n\nfunction isPieceNode(el) {\n  return el.tagName === 'PIECE';\n}\n\nfunction isSquareNode(el) {\n  return el.tagName === 'SQUARE';\n}\n\nfunction removeNodes(s, nodes) {\n  for (const i in nodes)\n    s.dom.elements.board.removeChild(nodes[i]);\n}\n\nfunction pieceNameOf(piece) {\n  return piece.role;\n}\n\nfunction safePush(arr, key, el) {\n  if (arr[key]) \n    arr[key].push(el);\n  else \n    arr[key] = [el];\n}\n","export function defaults() {\n  return {\n    level: 1,\n    dirs: {},\n    events: {}\n  };\n}\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./theme.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./theme.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./theme.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","const rows = 20;\n\nconst allKeys = (() => {\n  var res = [];\n  for (var r = 0; r < rows; r++)\n    for (var c = 0; c < rows; c++)\n      res.push(r + 'x' + c);\n  return res;\n})();\n\nexport const pos2key = (pos) => allKeys[rows * pos[0] + pos[1]];\n\nexport const key2pos = (k) => k.split('x').map(_ => parseInt(_));\n\nexport const posToTranslate = (pos) => {\n  var factor = 100 / 20;\n  return [pos[0] * factor,\n          pos[1] * factor];\n};\n\nexport const translate = (el, percents) => {\n  el.style.left = percents[0] + '%';\n  el.style.top = percents[1] + '%';\n}\n\nexport const createEl = (tagName, className) => {\n  const el = document.createElement(tagName);\n  if (className) el.className = className;\n  return el;\n};\n\nexport const raf = (window.requestAnimationFrame || window.setTimeout).bind(window);\n","import { createEl } from './util';\n\nexport default function wrap(element, state) {\n  \n  element.innerHTML = '';\n\n  element.classList.add('sg-wrap');\n\n  const container = createEl('sg-container');\n  element.appendChild(container);\n\n  const board = createEl('sg-board');\n  container.appendChild(board);\n\n  return {\n    board,\n    container\n  };\n\n}\n"],"sourceRoot":""}