var kcapeW;(()=>{"use strict";var t={86:(t,e,n)=>{t.exports=n.p+"3e53d8ff365997a17f1b.png"}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var o=e.getElementsByTagName("script");o.length&&(t=o[o.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})();var o={};(()=>{n.r(o),n.d(o,{default:()=>l});var t=n(86);const e=function(){function t(t,e){this.ctx=t,this.image=e,this.ctx.imageSmoothingEnabled=!1}return t.prototype.cls=function(){this.ctx.clearRect(0,0,320,160)},t.prototype.camera=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t=Math.floor(t),e=Math.floor(e),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.translate(t,e)},t.prototype.style=function(t){this.ctx.fillStyle=t},t.prototype.strokeStyle=function(t){this.ctx.strokeStyle=t},t.prototype.stroke=function(t,e,n,o){t=Math.floor(t),e=Math.floor(e),this.ctx.strokeRect(t,e,n,o)},t.prototype.rect=function(t,e,n,o){this.ctx.fillRect(t,e,n,o)},t.prototype.s=function(t,e,n,o,r,i,a,s,c){void 0===c&&(c=!1),r=Math.floor(r),i=Math.floor(i),this.ctx.save(),c&&(this.ctx.scale(-1,1),r*=-1,r-=a),this.ctx.drawImage(this.image,t,e,n,o,r,i,a,s),this.ctx.restore()},t}();var r;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down",t[t.X=4]="X",t[t.C=5]="C"}(r||(r={}));var i=[r.Left,r.Right,r.Up,r.Down,r.X,r.C];const a=function(){function t(){this.inputs={},this.gamepadPressed={}}return t.prototype.btn=function(t){var e;return(null===(e=this.inputs[t])||void 0===e?void 0:e.btn)||0},t.prototype.up=function(t){var e=this.inputs[t];e&&(e.btn=-10)},t.prototype.down=function(t){var e=this.inputs[t];e?e.btn>0||(e.btn=1):this.inputs[t]={btn:1}},t.prototype.update=function(){this.updateG();for(var t=0,e=i;t<e.length;t++){var n=e[t],o=this.inputs[n];o&&0!==o.btn&&o.btn++}},t.prototype.bind=function(){var t=this;document.addEventListener("keyup",(function(e){switch(e.code){case"ArrowUp":t.up(r.Up);break;case"ArrowDown":t.up(r.Down);break;case"ArrowLeft":t.up(r.Left);break;case"ArrowRight":t.up(r.Right);break;case"KeyX":t.up(r.X);break;case"KeyC":t.up(r.C)}})),document.addEventListener("keydown",(function(e){switch(e.code){case"ArrowUp":t.down(r.Up);break;case"ArrowDown":t.down(r.Down);break;case"ArrowLeft":t.down(r.Left);break;case"ArrowRight":t.down(r.Right);break;case"KeyX":t.down(r.X);break;case"KeyC":t.down(r.C)}}))},t.prototype.upG=function(t){this.gamepadPressed[t]&&(this.gamepadPressed[t]=!1,this.up(t))},t.prototype.downG=function(t){this.gamepadPressed[t]||(this.gamepadPressed[t]=!0,this.down(t))},t.prototype.updateG=function(){var t=navigator.getGamepads()[0];t&&(1===t.axes[0]?this.downG(r.Right):-1===t.axes[0]?this.downG(r.Left):(this.upG(r.Left),this.upG(r.Right)),1===t.axes[1]?this.downG(r.Down):-1===t.axes[1]?this.downG(r.Up):(this.upG(r.Down),this.upG(r.Up)),t.buttons[2].pressed?this.downG(r.X):this.upG(r.X),t.buttons[0].pressed?this.downG(r.C):this.upG(r.C))},t.prototype.bindGamepad=function(){},t}(),s=function(t){var e=document.createElement("canvas");e.width=320,e.height=160;var n=e.getContext("2d");if(!n)throw"No 2d context";this.ctx=n,t.appendChild(e)};var c=function(){function t(t){this.context=t}return Object.defineProperty(t.prototype,"draw",{get:function(){return this.context.draw},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"input",{get:function(){return this.context.input},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audio",{get:function(){return this.context.audio},enumerable:!1,configurable:!0}),t}();const p=function(){function t(t){this.interacted=!1,this.audio=t}return t.prototype.request=function(){this.interacted||(this.interacted=!0,this.audio.initAfterUserInteraction())},t}();var u,f=(u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const h=function(t){function e(e){var n=t.call(this,e)||this;return n.initAudio=new p(n.audio),n}return f(e,t),e.prototype.update=function(){var t=this.input.btn(r.Left),e=this.input.btn(r.Right),n=this.input.btn(r.Up),o=this.input.btn(r.Down),i=this.input.btn(r.X),a=this.input.btn(r.C);(t>0||e>0||n>0||o>0||i>0||a>0)&&this.initAudio.request(),this.draw.camera(),this.draw.cls()},e.prototype.render=function(){},e}(c);var d=function(){function t(){}return t.prototype.initAfterUserInteraction=function(){},t.prototype.sfx=function(t,e){},t.instance=new t,t}();function l(n){var o,r=d.instance;Promise.all([(o=t,new Promise((function(t){var e=new Image;e.src=o,e.onload=function(){return t(e)}}))),Promise.resolve(r)]).then((function(t){var o=t[0],r=t[1],i=new s(n),c=new e(i.ctx,o),p=new a;p.bind(),p.bindGamepad();var u,f=new h({draw:c,audio:r,input:p});u=function(){f.update(),p.update(),f.render()},Date.now(),function t(){Date.now(),u(),requestAnimationFrame(t)}()}))}})(),kcapeW=o})();